AC_INIT(configure.in)

#AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(media-encoding-cluster, 0.1)

AC_LANG_CPLUSPLUS
AC_PROG_CXX
AM_PROG_LIBTOOL


AC_ARG_WITH(ffmpeg, [  --with-ffmpeg=path   where ffmpeg is installed. (Standard is "/usr/local")],
	    FFMPEG_CFLAGS="-I$withval/include/ffmpeg"
	    FFMPEG_LD="-L$withval/lib -lavformat -lavcodec"
	    FFMPEG_PATH="$withval")

AC_ARG_WITH(amq, [  --with-amq=path   where activemq is installed. (Standard is "/usr/local")],
	    AMQ_CFLAGS="-I$withval/include/activemq-cpp-1.1"
	    AMQ_LD="-L$withval/lib -lactivemq-cpp"
	    AMQ_PATH="$withval")
	    
	    
CPPFLAGS="$CPPFLAGS $FFMPEG_CFLAGS -D__STDC_CONSTANT_MACROS -Wall -Wno-switch  -D_LARGEFILE_SOURCE -D_GNU_SOURCE"
LDFLAGS="$LDFLAGS $FFMPEG_LD -lsqlite3 -lbz2 -lz -L/usr/lib/mysql -lmysqlclient"
AC_OUTPUT(
    Makefile 
    src/Makefile 
    src/framehive/Makefile 
    test/Makefile
    src/org/Makefile
    src/org/esb/Makefile
    src/org/esb/hivecontrol/Makefile
dnl    src/org/esb/lang/Makefile
dnl    src/org/esb/socket/Makefile
dnl    src/org/esb/config/Makefile
    )
