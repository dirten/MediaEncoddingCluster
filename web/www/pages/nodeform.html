<form id="profileForm" action="/api/json/profile" method="POST">

  <div class="formLabel">Host:</div>
	<div class="formField"><input type="text" class="input" name="nodeHost" id="nodeHost" value="localhost" maxlength="150" /><div class="lite">Hostname or IP Address</div></div>
	<div class="clear"></div>

	<div class="formLabel">Node Name:</div>
	<div class="formField"><input type="text" class="input" name="nodeName" id="nodeName" value="node" maxlength="30" /><div class="lite">default is "node"</div></div>
	<div class="clear"></div>

	<div class="formLabel"></div>
	<div class="formField">
    <input type="submit" class="submit" id="connectSubmit" value="Connect" />
    <input type="submit" class="submit" id="connectCancel" value="Cancel" /></div>
  <div class="clear"></div>
</form>
<script type="text/javascript">

  window.addEvent("domready", function(){


    $('connectSubmit').addEvent('click', function(e){
      new Event(e).stop();
      new Event(e).stop();
      data='[{"command":"connect"},{"host":"'+$('nodeHost').get('value')+'"},{"name":"'+$('nodeName').get('value')+'"}]';
      new Request.JSON({
        url: '/api/json/nodes',
        method: 'POST',
        onComplete: function(props) {
          if(props.ok){
            MochaUI.closeWindow($('addnodewindow'));
            MochaUI.notification('Node Connected');
            nodegrid.refresh();
          }else{
            MochaUI.notification('Error: '+props.error);
          }
        }
      }).send(data);
    });
    $('connectCancel').addEvent('click', function(e){
      new Event(e).stop();
      MochaUI.closeWindow($('addnodewindow'));
//      MochaUI.notification('Profile Update Canceled');
    });
  });
</script>