<form id="profileFormatForm">
  <div class="formLabel" >Container Format:</div>
  <div class="formField">
    <select name="containerFormat" id="containerFormat" class="input" >
    </select>
  </div>
  <div class="clear"></div>
  <div class="formLabel">Container Extension:</div>
  <div class="formField">
    <select name="containerExtension" id="containerExtension" class="input" >
    </select>
  </div>
	<div class="clear"></div>
	<div class="formLabel">Author:</div>
	<div class="formField"><input type="text" class="input" name="author" id="author" value="" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Album:</div>
	<div class="formField"><input type="text" class="input" name="album" id="album" value="" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Artist:</div>
	<div class="formField"><input type="text" class="input" name="artist" id="artist" value="" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Comment:</div>
	<div class="formField"><input type="text" class="input" name="comment" id="comment" value="" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Composer:</div>
	<div class="formField"><input type="text" class="input" name="composer" id="composer" value="Media Encoding Cluster" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Copyright:</div>
	<div class="formField"><input type="text" class="input" name="copyright" id="copyright" value="" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Genre:</div>
	<div class="formField"><input type="text" class="input" name="genre" id="genre" value="" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Language:</div>
	<div class="formField"><input type="text" class="input" name="language" id="language" value="" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Title:</div>
	<div class="formField"><input type="text" class="input" name="title" id="title" value="" maxlength="38" /></div>
	<div class="clear"></div>
	<div class="formLabel">Track:</div>
	<div class="formField"><input type="text" class="input" name="track" id="track" value="" maxlength="38" /></div>
	<div class="clear"></div>

</form>
<script type="text/javascript">
  function setProfileFormatData(props, selected){
    $each(props,function(prop){
      var el=new Element('option',{'text':prop.longname, 'value':prop.name}).inject($('containerFormat'));
      if(prop.name==selected)
        el.set('selected');
    });
  }

  window.addEvent("domready", function(){
      new Request.JSON({
      url: '/api/format',
      method: 'get',
      onComplete: function(properties) {
          setProfileFormatData(properties.data,null);
      }
    }).send();

    setFormChangeListener($('profileFormatForm'), function(el){
    	if(typeof(profileModel.params.format)!='object'){
	    profileModel.params.format=new Object();
	}
	profileModel.params.format[el.target.name]=el.target.value
    });
    setFormData($('profileFormatForm'), profileModel.params.format);
  });

</script>
