<?xml version="1.0"?>
<!DOCTYPE database SYSTEM "litesql.dtd"> 
<database name="HiveDb" namespace="db">

    <object name="Project">
        <field name="name" type="string"/>
        <field name="outdirectory" type="string"/>
        <field name="status" type="string"/>
        <field name="created" type="date"/>
        <field name="started" type="date"/>
        <field name="completed" type="date"/>
    </object>

    <object name="Filter">
        <field name="filtername" type="string"/>
        <field name="filterid" type="string"/>
    </object>

    <object name="FilterParameter">
        <field name="fkey" type="string"/>
        <field name="fval" type="string"/>
    </object>

    <relation>
        <relate object="Filter" handle="parameter"/>
        <relate object="FilterParameter" handle="filter"/>
    </relation>

    <relation>
        <relate object="Filter" handle="mediafile"/>
        <relate object="MediaFile" handle="filter"/>
    </relation>

    <relation>
        <relate object="Filter" handle="project"/>
        <relate object="Project" handle="filter"/>
    </relation>



    <object name="MediaFile">
        <field name="filename" type="string"/>
        <field name="path" type="string"/>
        <field name="filesize" type="double"/>
        <field name="streamcount" type="integer"/>
        <field name="containertype" type="string"/>
        <field name="duration" type="double"/>
        <field name="starttime" type="double"/>
        <field name="bitrate" type="integer"/>
        <field name="created" type="datetime"/>
        <field name="filetype" type="integer"/>
        <field name="parent" type="integer"/>
        <field name="metatitle" type="string"/>
        <field name="metaauthor" type="string"/>
        <field name="metacopyright" type="string"/>
        <field name="metacomment" type="string"/>
        <field name="metaalbum" type="string"/>
        <field name="metayear" type="integer"/>
        <field name="metatrack" type="integer"/>
        <field name="metagenre" type="integer"/>
    </object>

    <relation>
        <relate object="MediaFile" handle="project"/>
        <relate object="Project" handle="mediafiles"/>
    </relation>

    <object name="ProfileGroup">
        <field name="name" type="string"/>
    </object>

    <object name="Profile">
        <field name="name" type="string"/>
        <field name="created" type="datetime"/>
        <field name="format" type="string"/>
        <field name="formatext" type="string"/>
        <field name="vcodec" type="integer"/>
        <field name="vbitrate" type="integer"/>
        <field name="vframerate" type="string"/>
        <field name="vwidth" type="integer"/>
        <field name="vheight" type="integer"/>
        <field name="vextra" type="string"/>
        <field name="achannels" type="integer"/>
        <field name="acodec" type="integer"/>
        <field name="abitrate" type="integer"/>
        <field name="asamplerate" type="integer"/>
        <field name="aextra" type="string"/>
        <field name="profiletype" type="integer"/>
        <field name="deinterlace" type="integer"/>
    </object>

    <object name="Preset">
        <field name="uuid" type="string"/>
        <field name="name" type="string"/>
        <field name="filename" type="string"/>
        <field name="data" type="string"/>
    </object>

    <relation object="Preset">
        <relate object="Preset" handle="project"/>
        <relate object="Project" handle="presets"/>
    </relation>

    <relation object="UserPreset">
        <relate object="User" handle="presets"/>
        <relate object="Preset" handle="user"/>
    </relation>

    <relation>
        <relate object="Filter" handle="profile"/>
        <relate object="Profile" handle="filter"/>
    </relation>

    <relation id="ProfileGroup2Profile" name="ProfileGroup2Profile">
        <relate object="Profile" handle="group"/>
        <relate object="ProfileGroup" handle="profiles"/>
    </relation>

    <relation id="ProfileGroup2ProfileGroupChildren" unidir="true">
        <relate object="ProfileGroup"  handle="childrens"/>
        <relate object="ProfileGroup" handle="parent"/>
    </relation>

    <object name="ProfileParameter">
        <field name="name" type="string"/>
        <field name="val" type="string"/>
        <field name="mediatype" type="integer"/>
    </object>

    <relation>
        <relate object="ProfileParameter" handle="profile"/>
        <relate object="Profile" handle="params"/>
    </relation>

    <relation>
        <relate object="Profile" handle="project"/>
        <relate object="Project" handle="profiles"/>
    </relation>

    <object name="Stream">
        <field name="streamindex" type="integer"/>
        <field name="streamtype" type="integer"/>
        <field name="codecid" type="integer"/>
        <field name="codecname" type="string"/>
        <field name="frameratenum" type="integer"/>
        <field name="framerateden" type="integer"/>
        <field name="streamtimebasenum" type="integer"/>
        <field name="streamtimebaseden" type="integer"/>
        <field name="codectimebasenum" type="integer"/>
        <field name="codectimebaseden" type="integer"/>
        <field name="firstpts" type="double"/>
        <field name="firstdts" type="double"/>
        <field name="duration" type="double"/>
        <field name="nbframes" type="double"/>
        <field name="ticksperframe" type="integer"/>
        <field name="framecount" type="integer"/>
        <field name="width" type="integer"/>
        <field name="height" type="integer"/>
        <field name="gopsize" type="integer"/>
        <field name="pixfmt" type="integer"/>
        <field name="bitrate" type="integer"/>
        <field name="samplerate" type="integer"/>
        <field name="samplefmt" type="integer"/>
        <field name="channels" type="integer"/>
        <field name="bitspercodedsample" type="integer"/>
        <field name="privdatasize" type="integer"/>
        <field name="privdata" type="string"/>
        <field name="extradatasize" type="integer"/>
        <field name="extradata" type="blob"/>
        <field name="aspectratio" type="string"/>
        <field name="flags" type="integer"/>
        <field name="extraprofileflags" type="string"/>
    </object>

    <object name="StreamParameter">
        <field name="name" type="string"/>
        <field name="val" type="string"/>
    </object>

    <relation>
        <relate object="StreamParameter" handle="stream"/>
        <relate object="Stream" handle="params"/>
    </relation>

    <relation>
        <relate object="Filter" handle="stream"/>
        <relate object="Stream" handle="filters"/>
    </relation>


    <relation>
        <relate object="Stream" handle="mediafile"/>
        <relate object="MediaFile" handle="streams" limit="one"/>
    </relation>

    <object name="CodecPreset">
        <field name="name" type="string"/>
        <field name="created" type="date"/>
        <field name="codecid" type="integer"/>
        <field name="preset" type="string"/>
    </object>

    <object name="CodecPresetParameter">
        <field name="name" type="string"/>
        <field name="val" type="string"/>
    </object>

    <relation id="CodecPreset2Parameter">
        <relate object="CodecPresetParameter" handle="preset"/>
        <relate object="CodecPreset" handle="params"/>
    </relation>

    <relation id="VideoCodecPreset2Profile">
        <relate object="CodecPreset" handle="vprofile"/>
        <relate object="Profile" handle="vpreset"/>
    </relation>
    
    <relation id="AudioCodecPreset2Profile">
        <relate object="CodecPreset" handle="aprofile"/>
        <relate object="Profile" handle="apreset"/>
    </relation>

    <object name="Config">
        <field name="configkey" type="string"/>
        <field name="configval" type="string"/>
    </object>

    <object name="Job">
        <field name="uuid" type="string"/>
        <field name="created" type="datetime" default="-1"/>
        <field name="begintime" type="datetime" default="-1"/>
        <field name="endtime" type="datetime" default="-1"/>
        <field name="status" type="string"/>
        <field name="infile" type="string"/>
        <field name="outfile" type="string"/>
        <field name="starttime" type="double"/>
        <field name="duration" type="double"/>
        <field name="progress" type="integer"/>
        <field name="data" type="string"/>
    </object>

    <object name="JobLog">
        <field name="created" type="datetime" default="0"/>
        <field name="message" type="string"/>
    </object>

    <relation id="JobJobLog">
        <relate object="Job" handle="joblog"/>
        <relate object="JobLog" handle="logjob"/>
    </relation>

    <relation id="JobInFile">
        <relate object="Job" handle="inputfile"/>
        <relate object="MediaFile" handle="jobsin"/>
    </relation>


    <relation id="JobOutFile">
        <relate object="Job" handle="outputfile"/>
        <relate object="MediaFile" handle="jobsout"/>
    </relation>

    <relation>
        <relate object="Job" handle="preset"/>
        <relate object="Preset" handle="job"/>
    </relation>

    <object name="JobDetail">
        <field name="lastpts" type="double"/>
        <field name="lastdts" type="double"/>
        <field name="deinterlace" type="integer"/>
    </object>

    <relation id="JobJobDetail">
        <relate object="Job" handle="jobdetails"/>
        <relate object="JobDetail" handle="job"/>
    </relation>

    <relation id="JobOutStream">
        <relate object="JobDetail" handle="outputstream"/>
        <relate object="Stream" handle="jobsout"/>
    </relation>

    <relation id="JobInStream">
        <relate object="JobDetail" handle="inputstream"/>
        <relate object="Stream" handle="jobsin"/>
    </relation>

    <object name="Watchfolder">
        <field name="infolder" type="string"/>
        <field name="outfolder" type="string"/>
        <field name="extensionfilter" type="string"/>
    </object>

    <relation id="WatchfolderProfile">
        <relate object="Watchfolder" handle="profile"/>
        <relate object="Profile" handle="watchfolder"/>
    </relation>

    <object name="ProcessUnit">
        <field name="sorcestream" type="integer"/>
        <field name="targetstream" type="integer"/>
        <field name="timebasenum" type="integer"/>
        <field name="timebaseden" type="integer"/>
        <field name="startts" type="double"/>
        <field name="endts" type="double"/>
        <field name="framecount" type="integer"/>
        <field name="send" type="datetime"/>
        <field name="recv" type="datetime"/>
    </object>

    <object name="User">
        <field name="authname" type="string"/>
        <field name="authpass" type="string"/>
        <field name="company" type="string"/>
        <field name="firstname" type="string"/>
        <field name="lastname" type="string"/>
        <field name="street" type="string"/>
        <field name="city" type="string"/>
        <field name="zip" type="string"/>
        <field name="country" type="string"/>
        <field name="state" type="string"/>
        <field name="telefone" type="string"/>
        <field name="fax" type="string"/>
        <field name="email" type="string"/>
        <field name="www" type="string"/>
        <field name="language" type="string"/>
        <field name="licensekey" type="string"/>
        <field name="apikey" type="string"/>
        <field name="registered" type="date"/>
        <field name="fileroot" type="string"/>
    </object>

    <object name="UserGroup">
        <field name="name" type="date"/>
        <field name="nodecount" type="integer"/>
    </object>

    <relation id="User2UserGroup">
        <relate object="User" handle="userGroup"/>
        <relate object="UserGroup" handle="user"/>
    </relation>

</database>
