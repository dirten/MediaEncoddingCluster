#ADD_DEFINITIONS(-D__STDC_CONSTANT_MACROS)

include_directories (${BOOST_INCLUDE_DIRS})
include_directories (${FFMPEG_DIR}/include)
include_directories (${MEC_SOURCE_DIR}/src)
include_directories (${XUGGLE}/include)

LINK_DIRECTORIES(${FFMPEG_DIR}/lib)
#LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/libogg/lib)
#LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/x264/lib)
#LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/xvidcore/lib)
#LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/lame/lib)
#LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/libtheora/lib)
#LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/libvorbis/lib)
#LINK_DIRECTORIES    (${XUGGLE}/lib)

add_executable (TestPacket TestPacket.cpp)
add_executable (TestSerializePacket TestSerializePacket.cpp)
add_executable (TestDeSerializePacket TestDeSerializePacket.cpp)
add_executable (TestFormatInputStream TestFormatInputStream.cpp)
add_executable (TestPacketInputStream TestPacketInputStream.cpp)
add_executable (TestPacketOutputStream TestPacketOutputStream.cpp)
add_executable (TestProcessAudioPacket TestProcessAudioPacket.cpp)
add_executable (TestFfmpeg TestFfmpeg.cpp)
add_executable (TestEuclid TestEuclid.cpp)
add_executable (TestFullTranscoding TestFullTranscoding.cpp)
add_executable (TestPass1 TestPass1.cpp)
add_executable (TestDecoder TestDecoder.cpp)
add_executable (TestEncoder TestEncoder.cpp)
add_executable (TestFrameConverter TestFrameConverter.cpp)
add_executable (TestFrame TestFrame.cpp)
add_executable (TestAudioEncoder TestAudioEncoder.cpp)
add_executable (AudioDecodeMP3 AudioDecodeMP3.cpp)
add_executable (MediaLocatorTest MediaLocatorTest.cpp)
add_executable (DataSourceTest DataSourceTest.cpp)
add_executable (TimeStampTest TimeStampTest.cpp)
add_executable (RationalTest RationalTest.cpp)
add_executable (BufferTest BufferTest.cpp)
add_executable (DemultiplexerTest DemultiplexerTest.cpp)
add_executable (CCodecTest CCodecTest.cpp)
add_executable (FormatTest FormatTest.cpp)
add_executable (FormatConverterTest FormatConverterTest.cpp)
add_executable (SeekTest SeekTest.cpp)
add_executable (AudioEncoderSetupTest AudioEncoderSetupTest.cpp)
add_executable (DecoderSerializerTest DecoderSerializerTest.cpp)
add_executable (FrameRateFilterTest FrameRateFilterTest.cpp)
add_executable (TestOwnFFMpegUrl TestOwnFFMpegUrl.cpp)

target_link_libraries (TestPacket av)
target_link_libraries (TestFfmpeg av)
target_link_libraries (TestSerializePacket io av util lang ${BOOST_SERIAL_LIB_MT} )
target_link_libraries (TestDeSerializePacket io av util lang ${BOOST_SERIAL_LIB_MT})
target_link_libraries (TestFormatInputStream io av util lang )
target_link_libraries (TestPacketInputStream io av util lang )
target_link_libraries (TestPacketOutputStream io av util lang )
target_link_libraries (TestProcessAudioPacket io hive av util lang )
target_link_libraries (TestFullTranscoding io av util lang )
target_link_libraries (TestPass1 io av util lang )
target_link_libraries (TestDecoder av io util lang )
target_link_libraries (TestEncoder av io util lang )
target_link_libraries (TestFrameConverter av io util lang)
target_link_libraries (TestFrame av io util lang)
target_link_libraries (TestAudioEncoder av io util lang)
target_link_libraries (AudioDecodeMP3 av io util lang esb)
target_link_libraries (MediaLocatorTest av io util lang)
target_link_libraries (DataSourceTest av io util lang)
target_link_libraries (TimeStampTest av io util lang)
target_link_libraries (RationalTest av io util lang)
target_link_libraries (BufferTest av io util lang)
target_link_libraries (DemultiplexerTest av io util lang)
target_link_libraries (CCodecTest av io util lang)
target_link_libraries (FormatTest av io util lang)
target_link_libraries (FormatConverterTest av io util lang)
target_link_libraries (SeekTest av io util lang)
target_link_libraries (AudioEncoderSetupTest esb hive )
target_link_libraries (FrameRateFilterTest av io util lang)
target_link_libraries (TestOwnFFMpegUrl av io util lang)

#IF(NOT WIN32)
#target_link_libraries (TestFfmpeg ${BZ2_LIB} pthread z )
#target_link_libraries (TestPacket ${BZ2_LIB} avformat avcodec avutil swscale pthread z )
#target_link_libraries (TestSerializePacket ${BZ2_LIB} avformat avcodec avutil swscale pthread z ${BOOST_SERIAL_LIB_MT})
#target_link_libraries (TestDeSerializePacket ${BZ2_LIB} avformat avcodec avutil swscale  pthread z ${BOOST_SERIAL_LIB_MT})
#target_link_libraries (TestFormatInputStream ${BZ2_LIB} avformat avcodec avutil swscale pthread z )
#target_link_libraries (TestPacketInputStream ${BZ2_LIB} avformat avcodec avutil swscale pthread z )
#target_link_libraries (TestPacketOutputStream ${BZ2_LIB} avformat avcodec avutil swscale pthread z )
#target_link_libraries (TestProcessAudioPacket ${BZ2_LIB} avformat avcodec avutil swscale pthread z ${BOOST_SERIAL_LIB_MT})
#target_link_libraries (TestFullTranscoding ${BZ2_LIB} avformat avcodec avutil swscale pthread z ${BOOST_SERIAL_LIB_MT})

#ENDIF(NOT WIN32)

ADD_TEST(av.PacketTest ${EXECUTABLE_OUTPUT_PATH}/TestPacket)
ADD_TEST(av.TestFfmpeg ${EXECUTABLE_OUTPUT_PATH}/TestFfmpeg )
ADD_TEST(av.SerializePacketTest ${EXECUTABLE_OUTPUT_PATH}/TestSerializePacket)
ADD_TEST(av.DeSerializePacketTest ${EXECUTABLE_OUTPUT_PATH}/TestDeSerializePacket)
ADD_TEST(av.FormatInputStreamTest ${EXECUTABLE_OUTPUT_PATH}/TestFormatInputStream)
ADD_TEST(av.PacketInputStreamTest ${EXECUTABLE_OUTPUT_PATH}/TestPacketInputStream)
ADD_TEST(av.PacketOutputStreamTest ${EXECUTABLE_OUTPUT_PATH}/TestPacketOutputStream)
ADD_TEST(av.ProcessAudioPacketTest ${EXECUTABLE_OUTPUT_PATH}/TestProcessAudioPacket)
ADD_TEST(av.FullTranscodingTest ${EXECUTABLE_OUTPUT_PATH}/TestFullTranscoding)
ADD_TEST(av.FullTranscodingDVD2AVITest ${EXECUTABLE_OUTPUT_PATH}/TestFullTranscoding ${MEC_SOURCE_DIR}/test.dvd ${MEC_SOURCE_DIR}/test.avi)
ADD_TEST(av.Pass1Test ${EXECUTABLE_OUTPUT_PATH}/TestPass1)
ADD_TEST(av.DecoderTest ${EXECUTABLE_OUTPUT_PATH}/TestDecoder)
ADD_TEST(av.EncoderTest ${EXECUTABLE_OUTPUT_PATH}/TestEncoder)
ADD_TEST(av.FrameConverterTest ${EXECUTABLE_OUTPUT_PATH}/TestFrameConverter ${MEC_SOURCE_DIR}/test.dvd)
ADD_TEST(av.FrameTest ${EXECUTABLE_OUTPUT_PATH}/TestFrame)
ADD_TEST(av.AudioDecodeMP3Test ${EXECUTABLE_OUTPUT_PATH}/AudioDecodeMP3)
ADD_TEST(av.MediaLocatorTest ${EXECUTABLE_OUTPUT_PATH}/MediaLocatorTest)
ADD_TEST(av.DataSourceTest ${EXECUTABLE_OUTPUT_PATH}/DataSourceTest)
ADD_TEST(av.TimeStampTest ${EXECUTABLE_OUTPUT_PATH}/TimeStampTest)
ADD_TEST(av.RationalTest ${EXECUTABLE_OUTPUT_PATH}/RationalTest)
ADD_TEST(av.BufferTest ${EXECUTABLE_OUTPUT_PATH}/BufferTest)
ADD_TEST(av.DemultiplexerTest ${EXECUTABLE_OUTPUT_PATH}/DemultiplexerTest)
ADD_TEST(av.CCodecTest ${EXECUTABLE_OUTPUT_PATH}/CCodecTest)
ADD_TEST(av.FormatTest ${EXECUTABLE_OUTPUT_PATH}/FormatTest)
ADD_TEST(av.FormatConverterTest ${EXECUTABLE_OUTPUT_PATH}/FormatConverterTest)
ADD_TEST(av.SeekTest ${EXECUTABLE_OUTPUT_PATH}/SeekTest)
ADD_TEST(av.FrameRateFilterTest ${EXECUTABLE_OUTPUT_PATH}/FrameRateFilterTest)
ADD_TEST(av.TestOwnFFMpegUrl ${EXECUTABLE_OUTPUT_PATH}/TestOwnFFMpegUrl)

