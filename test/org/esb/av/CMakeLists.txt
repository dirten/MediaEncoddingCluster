#ADD_DEFINITIONS(-D__STDC_CONSTANT_MACROS)

include_directories (${BOOST_INCLUDE_DIRS})
include_directories (${FFMPEG_DIR}/include)
include_directories (${MEC_SOURCE_DIR}/src)
include_directories (${XUGGLE}/include)

LINK_DIRECTORIES(${FFMPEG_DIR}/lib)
LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/libogg/lib)
LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/x264/lib)
LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/xvidcore/lib)
LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/lame/lib)
LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/libtheora/lib)
LINK_DIRECTORIES    (${MEC_SOURCE_DIR}/source/build/libvorbis/lib)
LINK_DIRECTORIES    (${XUGGLE}/lib)

add_executable (TestPacket TestPacket.cpp)
add_executable (TestSerializePacket TestSerializePacket.cpp)
add_executable (TestDeSerializePacket TestDeSerializePacket.cpp)
add_executable (TestFormatInputStream TestFormatInputStream.cpp)
add_executable (TestPacketInputStream TestPacketInputStream.cpp)
add_executable (TestPacketOutputStream TestPacketOutputStream.cpp)
add_executable (TestProcessAudioPacket TestProcessAudioPacket.cpp)
add_executable (TestFfmpeg TestFfmpeg.cpp)
add_executable (TestEuclid TestEuclid.cpp)
add_executable (TestFullTranscoding TestFullTranscoding.cpp)
add_executable (TestPass1 TestPass1.cpp)
add_executable (TestDecoder TestDecoder.cpp)
add_executable (TestEncoder TestEncoder.cpp)
add_executable (TestFrameConverter TestFrameConverter.cpp)
add_executable (TestFrame TestFrame.cpp)
add_executable (TestAudioEncoder TestAudioEncoder.cpp)
add_executable (AudioDecodeMP3 AudioDecodeMP3.cpp)

target_link_libraries (TestPacket av)
target_link_libraries (TestFfmpeg av)
target_link_libraries (TestSerializePacket io av util lang ${BOOST_SERIAL_LIB_MT} )
target_link_libraries (TestDeSerializePacket io av util lang ${BOOST_SERIAL_LIB_MT})
target_link_libraries (TestFormatInputStream io av util lang )
target_link_libraries (TestPacketInputStream io av util lang )
target_link_libraries (TestPacketOutputStream io av util lang )
target_link_libraries (TestProcessAudioPacket io hive av util lang )
target_link_libraries (TestFullTranscoding io av util lang )
target_link_libraries (TestPass1 io av util lang )
target_link_libraries (TestDecoder av io util lang )
target_link_libraries (TestEncoder av io util lang )
target_link_libraries (TestFrameConverter av io util lang)
target_link_libraries (TestFrame av io util lang)
target_link_libraries (TestAudioEncoder av io util lang)
target_link_libraries (AudioDecodeMP3 av io util lang)

#IF(NOT WIN32)
#target_link_libraries (TestFfmpeg ${BZ2_LIB} pthread z )
#target_link_libraries (TestPacket ${BZ2_LIB} avformat avcodec avutil swscale pthread z )
#target_link_libraries (TestSerializePacket ${BZ2_LIB} avformat avcodec avutil swscale pthread z ${BOOST_SERIAL_LIB_MT})
#target_link_libraries (TestDeSerializePacket ${BZ2_LIB} avformat avcodec avutil swscale  pthread z ${BOOST_SERIAL_LIB_MT})
#target_link_libraries (TestFormatInputStream ${BZ2_LIB} avformat avcodec avutil swscale pthread z )
#target_link_libraries (TestPacketInputStream ${BZ2_LIB} avformat avcodec avutil swscale pthread z )
#target_link_libraries (TestPacketOutputStream ${BZ2_LIB} avformat avcodec avutil swscale pthread z )
#target_link_libraries (TestProcessAudioPacket ${BZ2_LIB} avformat avcodec avutil swscale pthread z ${BOOST_SERIAL_LIB_MT})
#target_link_libraries (TestFullTranscoding ${BZ2_LIB} avformat avcodec avutil swscale pthread z ${BOOST_SERIAL_LIB_MT})

#ENDIF(NOT WIN32)

ADD_TEST(LibAVPacket ${EXECUTABLE_OUTPUT_PATH}/TestPacket)
ADD_TEST(TestFfmpeg ${EXECUTABLE_OUTPUT_PATH}/TestFfmpeg )
ADD_TEST(org.esb.av.SerializePacketTest ${EXECUTABLE_OUTPUT_PATH}/TestSerializePacket)
ADD_TEST(org.esb.av.DeSerializePacketTest ${EXECUTABLE_OUTPUT_PATH}/TestDeSerializePacket)
ADD_TEST(LibAVFormatInputStream ${EXECUTABLE_OUTPUT_PATH}/TestFormatInputStream)
ADD_TEST(LibAVPacketInputStream ${EXECUTABLE_OUTPUT_PATH}/TestPacketInputStream)
ADD_TEST(TestPacketOutputStream ${EXECUTABLE_OUTPUT_PATH}/TestPacketOutputStream)
ADD_TEST(TestProcessAudioPacket ${EXECUTABLE_OUTPUT_PATH}/TestProcessAudioPacket)
ADD_TEST(TestFullTranscoding ${EXECUTABLE_OUTPUT_PATH}/TestFullTranscoding)
ADD_TEST(TestFullTranscodingDVD2AVI ${EXECUTABLE_OUTPUT_PATH}/TestFullTranscoding ${MEC_SOURCE_DIR}/test.dvd ${MEC_SOURCE_DIR}/test.avi)
ADD_TEST(TestPass1 ${EXECUTABLE_OUTPUT_PATH}/TestPass1)
ADD_TEST(TestDecoder ${EXECUTABLE_OUTPUT_PATH}/TestDecoder)
ADD_TEST(TestEncoder ${EXECUTABLE_OUTPUT_PATH}/TestEncoder)
ADD_TEST(org.esb.av.FrameConverterTest ${EXECUTABLE_OUTPUT_PATH}/TestFrameConverter ${MEC_SOURCE_DIR}/test.dvd)
ADD_TEST(TestFrame ${EXECUTABLE_OUTPUT_PATH}/TestFrame)
ADD_TEST(org.esb.av.AudioDecodeMP3Test ${EXECUTABLE_OUTPUT_PATH}/AudioDecodeMP3)

